<!DOCTYPE html>
<html lang="en">
 <%- include ('./partials/head') %>
<body>
   
    <%- include ('./partials/header') %>

    single post page
    <h1> <%= post.author %> </h1>
    <h2> <%= post.title %> </h2>
    <p> <%= post.content %> </p>
    <a href="/post">Write a comment</a>
    <button id="deleteBtn">Delete</button>
    <script>
        document.getElementById('deleteBtn').addEventListener('click', async function() {
            if (!confirm('Are you sure you want to delete this post?')) return;
            const postId = <%= post.id %>;
            const res = await fetch(`/post/${postId}`, { method: 'DELETE' });
            if (res.ok) {
            window.location.href = '/';
            } else {
            alert('Failed to delete post.');
            }
        });
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
 <%- include ('./partials/head') %>
<body>
   
    <%- include ('./partials/header') %>

    <h1> <%= user.name %> </h1>
    <h2> <%= user.email %> </h2>
    <p>Welcome, <%= user.name %> !</p>
    <a href="/post">Write a comment</a>
    <button id="deleteBtn">Delete</button>
    <script>
        document.getElementById('deleteBtn').addEventListener('click', async function() {
            if (!confirm('Are you sure you want to delete this post?')) return;
            const userId = <%- JSON.stringify(user.id) %>;
            const res = await fetch(`/user/${userId}`, { method: 'DELETE' });
            if (res.ok) {
            window.location.href = '/';
            } else {
            alert('Failed to delete post.');
            }
        });
    </script>
</body>
</html>